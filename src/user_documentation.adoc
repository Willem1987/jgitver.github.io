include::attributes.adoc[]
= User documentation

include::includes.adoc[tag=wip]

see the <<developer_documentation.adoc#_projects,projects>> section to access existing projects README.

== Modes

{jgitver-doc}[jgitver] provides different ways of computing version called _'modes'_ or _'strategies'_. Each mode comes with some behavior, defaults and configuration capabilities.

=== maven mode

[TIP]
====
The maven mode is built to reflect maven way of versioning: SNAPSHOTs and RELEASEs
====


In this mode _(which is the default mode of the jgitver maven plugin)_, {jgitver-lib}[jgitver] will:

- on a DETACHED HEAD having an annotated tag, use the tag name without further computation : _mean to release_
- add SNAPSHOT qualifier to the calculated version each time it is not in the previous state : _everything is a SNAPSHOT except a release_
- increase the patch version except if it comes from a lightweight tag : _mean to start a new version pattern numbering_
- use annotated tags before lightweight ones when on a DETACHED HEAD : _reproducible builds for release_
- use lightweight tags before annotated ones when on a normal branch (master or any other branch) : _start 'next' version after release_
- add a branch qualifier on purpose : _avoid version collision for feature branches_

=== default mode

[TIP]
====
The default mode is built to reflect a standard way of versioning, each commit being uniquely identified.
====

In this mode _(which is the default mode of the jgitver gradle plugin)_, {jgitver-lib}[jgitver] will:

* on a DETACHED HEAD having an annotated tag, use the tag name without further computation
* use annotated tags before lightweight ones when on a DETACHED HEAD
* use lightweight tags before annotated ones when on a normal branch (master or any other branch)
  - exception is when HEAD is on current branch, lightweight tags have precedence only when the repository is dirty
* add a branch qualifier on purpose

=== pattern mode

[TIP]
====
This mode allows some freedom to the project owner. As a project maintainer you define/configure your own pattern of versioning.
====

[WARNING]
====
The pattern mode is new in jgitver-0.7.0 and is to be considered as beta feature.
====

In this mode, {jgitver-lib}[jgitver] computes some metadatas that can be used in a pattern definition, provided by configuration, to compute the final version.

[NOTE]
====
this section needs enhancements. Partial information can be found in https://github.com/jgitver/jgitver/issues/33#issuecomment-350811654[jgitver#33].
====

== Maven configuration

include::includes.adoc[tag=wip]

see the https://github.com/jgitver/jgitver-maven-plugin[jgitver-maven-plugin] project
https://github.com/jgitver/jgitver-maven-plugin/blob/master/README.md[README] until the doc is enhanced.

== Gradle configuration

include::includes.adoc[tag=wip]

see the https://github.com/jgitver/gradle-jgitver-plugin[gradle-jgitver-plugin] project
https://github.com/jgitver/gradle-jgitver-plugin/blob/master/README.md[README] until the doc is enhanced.

== IDEs usage

By providing dynamic versioning, {jgitver-doc}[jgitver] is not currently the best friend of IDEs.

But on the other hand your IDE is probably not your build tool ; so it is not a problem if it does understand all of your build pipeline.

Please refer to the instructions of your preferred IDE and if you need projects dependencies within the IDE then look
at the latest paragraph.

=== Eclipse

Having {jgitver-doc}[jgitver] setup on your project does not hurt Eclipse at all.

Just import your project as you would do normally.
Eclipse will import it using the content of your pom.xml file, it will not evaluate version using {jgitver-doc}[jgitver].

=== Intellij IDEA

Unfortunately, Intellij IDEA still does not work out of the box when {jgitver-doc}[jgitver] is there.
The problem has been reported to Intellij under the following issue https://youtrack.jetbrains.com/issue/IDEA-187928[IDEA-187928].

To workaround Intellij failure, you have to deactivate {jgitver-doc}[jgitver] for the import step.
For maven projects for example, open the settings `CTRL+ALT+S` and modify imports settings by adding `-Djgitver.skip=true`
as in the below image.

image:intellij-skip-jgitver.jpg[]

=== Netbeans

Exactly like Eclipse does, Netbeans just use the content of the pom.xml while importing your project.
Just import your project as you would do normally.

=== Project dependencies within IDEs

If you want to open several projects within your IDE and make project references between
those projects then having projects which version is dynamically changing is not the best way to help
your IDE keeping the references between the projects.

Especially if your are not using maven like `SNAPSHOT` but unique version for each of your commits then it is better to bypass the dynamic nature of {jgitver-doc}[jgitver].

include::includes.adoc[tag=wip]

